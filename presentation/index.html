<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Microservices Workshop</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/css/reset.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/css/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/css/theme/white.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/lib/css/monokai.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/js/reveal.min.js"></script>
    <style>
        .reveal .slides section img {
            border: none;
            box-shadow: none;
        }

        .reveal .slides blockquote {
            background-color: #eee;
            box-shadow: 0 0 10px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">
                <section data-markdown data-background-color="#000" data-background-image="https://media.giphy.com/media/l2Jhy8MIvBe8tmKK4/giphy.gif">
                    <textarea data-template>
                        ## Lo que no te contaron de microservicios
                        
                        Lo bueno y **lo malo**

                        with ❤️ by Alan Szpigiel 
                    </textarea>
                </section>

                <section data-markdown>
                    <textarea data-template>
                        ![Alan Szpigiel](https://avatars2.githubusercontent.com/u/4085136?s=300&u=5cc463896003ef60a41e6d4c2ca7b584c1055a37&v=4)

                        @alanszp | Alan Szpigiel

                        [linkedin](https://www.linkedin.com/in/alanszp/) - [github](https://github.com/alanszp) - [instagram](https://www.instagram.com/alanszp)
                    </textarea>
                </section>

                <section data-markdown data-background-color="#fff">
                    <textarea data-template>
                        ![Trocafone](./images/troca.png)

                        working @ Trocafone

                        Eng. Manager
                    </textarea>
                </section>

                <section data-markdown data-background-color="#fff">
                    <textarea data-template>
                        <p><img src="./images/flag.gif" alt="Trocafone"></p>
                        
                        <p style="font-weight: bold">comprar &gt; refurbish &gt; <span class="fragment highlight-current-blue"">vender</span></p>
                    </textarea>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## ¿Qué son los microservicios?
                        </textarea>
                    </section>


                    <section data-markdown>
                        <textarea data-template>
                             Forma de construir una aplicación como un conjunto de pequeños servicios
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                             Se ejecutan en su propio proceso y se comunican por APIs
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Cada servicio se encarga de implementar un dominio
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## ¿Por qué esta tan de moda?
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ## Elección de tecnologías
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ## Si algo falla, no se rompe TODO
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ## Escalar las partes que necesitamos
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ## Escalar y deployar las partes que necesitamos
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ## Reutilizar y componer
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ## Facilidad de reemplazarlos
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ## Mejorar el trabajo entre equipos de gran tamaño
                        </textarea>
                    </section>
                </section>


                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Lo viejo
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ## Monolito
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Una aplicacion contenida completamente en un codebase
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Es responsable de todos los pasos necesarios para completar funcionalidad de la aplicación
                        </textarea>
                    </section>
                </section>


                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Por ejemplo...
                        </textarea>
                    </section>


                    <section data-markdown>
                        <textarea data-template>
                            Monolito
                            
                            <img src="./images/example/monolith-example.png"/>
                        </textarea>
                    </section>


                    <section data-markdown>
                        <textarea data-template>
                            Microservico

                            <img src="./images/example/microservice-example.png"/>
                        </textarea>
                    </section>
                </section>


                <section data-markdown>
                    <textarea data-template>
                        Algo malo tiene que tener...

                        ![Evil](http://giphygifs.s3.amazonaws.com/media/RG4IXFG1YmLOU/giphy.gif)
                    </textarea>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Deploys mas complicados

                            ![Deploy](https://media.giphy.com/media/CDZwopbecAbIc/giphy.gif)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            > Quiero agregar en cuanto tiempo va a llegar el envio
                        </textarea>
                    </section>



                    <section data-markdown>
                        <textarea data-template>
                            > Quiero agregar en cuanto tiempo va a llegar el envio

                            > ... pero que quede guardado, para saber luego si lo envie a tiempo
                        </textarea>
                    </section>


                    <section data-markdown>
                        <textarea data-template>
                            Monolito

                            ![monolito](./images/complex-deploys/complex-deploys-monolith.png)
                        </textarea>
                    </section>


                    <section data-markdown>
                        <textarea data-template>
                            Microservicios

                            ![monolito](./images/complex-deploys/complex-deploys-microservices.png)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Manejo de logs

                            ![logs](https://media.giphy.com/media/vS2qy4SjaX2ta/giphy.gif)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ![microservicio](./images/logs/log-monolith.png)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ![microservicio](./images/logs/log-flow.png)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Mucho mas complejo co-relacionar los logs

                            ![microservicio](./images/logs/log-correlation.png)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Mas complejo de debugear

                            ![microservicio](./images/logs/log-correlation-bug.png)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Monitoreo de infraestructura

                            ![monit](https://media.giphy.com/media/ZKw0NDn10ljSE/giphy.gif)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ![monit](./images/monit/monit-service.png)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ![monit](./images/monit/monit-service-zoom-1.png)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ![monit](./images/monit/monit-service-zoom-2.png)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ![monit](./images/monit/monit-service-zoom-3.png)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Llamados externos

                            ![call](https://media.giphy.com/media/o2V3s21kb9jPO/giphy.gif)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            <pre><code data-trim data-noescape class="hljs javascript" data-line-numbers>
                                import {calculatePrice} from '../deliveryService'
                                
                                export function cartTotal(items, deliveryType) {
                                    return _.sum(items, i => i.price) +
                                        calculatePrice(items, deliveryType);
                                }
                            </code></pre>
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Introducción de **ASINCRONISMO**

                            donde antes no lo había

                            <pre><code data-trim data-noescape class="hljs javascript" data-line-numbers="3,5">
                                import {calculatePrice} from '../deliveryService'

                                export function async cartTotal(items, deliveryType) {
                                    return _.sum(items, i => i.price) +
                                        await calculatePrice(items, deliveryType);
                                }
                            </code></pre>
                        </textarea>
                    </section>
                  
                    <section data-markdown>
                        <textarea data-template>
                            Introducción de **ERRORES**

                            donde antes no lo había

                            <pre><code data-trim data-noescape class="hljs javascript" data-line-numbers>
                                import {calculatePrice} from '../deliveryService'

                                export function async cartTotal(items, deliveryType) {
                                    try {
                                        let deliveryPrice = await calculatePrice(
                                            items,
                                            deliveryType
                                        );

                                        return _.sum(items, i => i.price) +
                                            deliveryPrice;
                                    } catch (err) {
                                        throw new CartDependencyError(err);
                                    }
                                }
                            </code></pre>
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Introducción de **OVERHEAD y LAG**

                            donde antes no lo había

                            ![lag](https://media.giphy.com/media/M5bYG7WvKuLSw/giphy.gif)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Dependencia de componentes externos

                            <img style="max-width: 350px;" src="https://media.giphy.com/media/MFabj1E9mgUsqwVWHu/giphy.gif"/>
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            <pre><code data-trim data-noescape class="hljs javascript" data-line-numbers>
                                import {cartTotal} from '../cartCalculator'

                                export function async checkoutSummary(req, res, next) {
                                    ...
                                    let total = await cartTotal(items, deliveryType);
                                    return res.json({
                                        total 
                                    });
                                }
                            </code></pre>
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            <pre><code data-trim data-noescape class="hljs javascript" data-line-numbers>
                                import {cartTotal} from '../cartCalculator'

                                export function async checkoutSummary(req, res, next) {
                                    ...
                                    try {
                                        let total = await cartTotal(items, deliveryType);
                                    } catch (err) {
                                        ????
                                    }

                                    return res.json({
                                        total
                                    });
                                }
                            </code></pre>
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Hacerse siempre la pregunta
                            
                            > ¿Qué pasa si el otro servicio no esta en linea?
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Duplicación de datos

                            <img style="max-width: 350px;" src="https://media.giphy.com/media/XDd5b7NUbS1C1PMjUl/giphy.gif"/>
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ![monit](./images/storage/storage-example.png)  
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ![monit](./images/storage/storage-bounding-context.png)  
                        </textarea>
                    </section>
                </section>


                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Sincronizacion de datos

                            ![sync](https://media.giphy.com/media/c8Idooow6NHiw/giphy.gif)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ![monit](./images/sync/sync-example.png)  
                        </textarea>
                    </section>
                </section>


                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Consultas complejas </br> entre DBs

                            ![datascience](https://media.giphy.com/media/3osxYc2axjCJNsCXyE/giphy.gif)
                        </textarea>
                    </section>


                    <section data-markdown>
                        <textarea data-template>
                            En monolito

                            <pre><code data-trim data-noescape class="hljs sql" data-line-numbers>
                                SELECT orders.id, payments.installments
                                FROM orders
                                LEFT JOIN payments ON payments.id = order.payment_id
                            </code></pre>
                        </textarea>
                    </section>


                    <section data-markdown>
                        <textarea data-template>
                            Con Microservicios
                            <pre><code data-trim data-noescape class="hljs sql" data-line-numbers>
                                SELECT orders.id, order.payment_reference
                                FROM orders
                            </code></pre>

                            <pre><code data-trim data-noescape class="hljs sql" data-line-numbers>
                                SELECT payments.id, payments.installments
                                FROM payments
                            </code></pre>
                            
                            Joineamos la data a mano o en excel?
                        </textarea>
                    </section>

                </section>


                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Jungla de tecnologias y formas de hacer las cosas
                        </textarea>
                    </section>
                    <section data-markdown>
                        <textarea data-template>
                            ![monit](./images/estandarization/estandarization-example.png)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Complejo

                            ![complejo](https://media.giphy.com/media/BmmfETghGOPrW/giphy.gif)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Regla básica

                            > Mayor cantidad de componentes, </br>
                            mas complejo el sistema
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            <img style="width: 300px;" src="https://media.giphy.com/media/V0IdVIIW1y5d6/giphy.gif"/>
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Regla básica

                            > Mayor cantidad de componentes, </br>
                            mas complejo el sistema
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            Entonces, ¿los monolitos son mejores?
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Dificil de organizarnos a medida que crece
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Fuerza a trabajar todo en la misma tecnologia, donde a veces no es la mas optima para la tarea
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            No se puede escalar por partes
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Si se hace un cambio en la parte de pagos, se tiene que compilar y deployar todo
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Poco reutilizable para otros propósitos
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Lleva a generar pocas/peores abstracciones, por no tener la necesidad
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            No nos fuerza a separar los dominios, generando acoplamiento
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Todo esto suma a que se genere mas déuda tecnica
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Por el acoplamiento y la deuda técnica, cada vez es mas complicado agregar funcionalidades nuevas
                        </textarea>
                    </section>
                </section>



                <section>
                    <section data-markdown>
                        <textarea data-template>
                            Me mareé, ¿con qué me quedó?
                        </textarea>
                    </section>
                    
                    <section data-markdown>
                        <textarea data-template>
                            La respuesta no es simple y depende del problema
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Como todo, no hay silver bullet
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Entender las ventajas y desventajas que hablamos antes de cada uno de los approachs 
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            A nivel general

                            > Comenzar con un Monolito y transicionar de a poco a Microservicios
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            ## Buenas practicas para construir Microservicios

                            ![good-practices](https://media.giphy.com/media/fQGf2FTKayOnKjwidV/giphy.gif)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            # Equipo
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Equipos cross-funcionales y no organizados por áreas de expertise

                            ![team-organization](./images/team-org/team-org-both-sides.png)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Ownership del equipo sobre su dominio

                            ![ownership](https://media.giphy.com/media/FrnpqArQZtti8/giphy.gif)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Equipos chicos

                            <img style="max-width: 350px;" src="https://media.giphy.com/media/xUA7aP8hOW80VnoFAk/giphy.gif"/>
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            El equipo cubra todo el ciclo de desarrollo

                            ![full-cycle](./images/full-cycle/soft-life-cycle.png)
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Mapear 1 a 1 los stakeholders con los equipos

                            ![ownership](https://media.giphy.com/media/sFK74luzYFhzG/giphy.gif)
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            # Proceso
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Definición, estandarización y automatización de pipelines de delivery
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            El equipo es owner del deploy
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            El diseño de una feature comience con una interfaz
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Testear las interfaces con test de integración
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Mock de las interfaces
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Tratar a los servidores/instancias/containters como ganado y no como mascotas
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            ETLs para los equipos de Reporting
                        </textarea>
                    </section>
                </section>

                <section>
                    <section data-markdown>
                        <textarea data-template>
                            # Tecnologia
                        </textarea>
                    </section>
                    
                    <section data-markdown>
                        <textarea data-template>
                            No tener un zoo de tecnologías que pocos conozcan
                        </textarea>
                    </section>
                    
                    <section data-markdown>
                        <textarea data-template>
                            Librerías comunes para la misma tecnología
                        </textarea>
                    </section>
                    
                    <section data-markdown>
                        <textarea data-template>
                            Trackear el flujo distribuido con lifecycle/trace/flow ID, pasandolo de servicio a servicio 
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            No olvidarse que el frontend tambien puede convertirse en un monolito
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            Utilizar JSON schemas y OpenAPI para documentar las APIs
                        </textarea>
                    </section>

                    <section data-markdown>
                        <textarea data-template>
                            No zarparse con la palabra MICRO

                            > Cuanto más micro son los servicios, más aumentan las ventajas y desventajas
                        </textarea>
                    </section>
                </section>

        </div>
    </div>

    <script>
      Reveal.initialize({
        progress: true,
        hash: true,
        dependencies: [
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/plugin/markdown/marked.js' },
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/plugin/markdown/markdown.min.js' },
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/plugin/notes/notes.min.js', async: true },
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.8.0/plugin/highlight/highlight.min.js', async: true },
        ]
      });
    </script>
</body>
</html>